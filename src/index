import e,{memo as r,forwardRef as a}from"react";import{requireNativeComponent as o,NativeModules as t,StyleSheet as n,Image as l,View as s,Platform as c}from"react-native";const i=null!=global?.nativeFabricUIManager?require("./FastImageViewNativeComponent").default:o("FastImageView");const d=r((function({source:r,defaultSource:a,tintColor:o,onLoadStart:t,onProgress:d,onLoad:m,onError:u,onLoadEnd:h,style:f,fallback:F,children:I,resizeMode:b="cover",forwardedRef:v,...w}){if(F){const c={...r};delete c.cache;const i=l.resolveAssetSource(c);return e.createElement(s,{style:[g.imageContainer,f],ref:v},e.createElement(l,{...w,style:[n.absoluteFill,{tintColor:o}],source:i,defaultSource:a,onLoadStart:t,onProgress:d,onLoad:m,onError:u,onLoadEnd:h,resizeMode:b}),I)}const y=!!global?.nativeFabricUIManager,C=l.resolveAssetSource(r);if(C?.headers&&(y||"android"===c.OS)){const e=[];Object.keys(C.headers).forEach((r=>{e.push({name:r,value:C.headers[r]})})),C.headers=e}const E=(e=>{if(!e)return null;if("android"===c.OS){const r=l.resolveAssetSource(e);return r?r.uri:null}return e})(a),S=null!==E?String(E):null;return e.createElement(s,{style:[g.imageContainer,f],ref:v},e.createElement(i,{...w,tintColor:o,style:n.absoluteFill,source:C,defaultSource:S,onFastImageLoadStart:t,onFastImageProgress:d,onFastImageLoad:m,onFastImageError:u,onFastImageLoadEnd:h,resizeMode:b}),I)})),m=a(((r,a)=>e.createElement(d,{forwardedRef:a,...r})));m.displayName="FastImage";const u=m;u.resizeMode={contain:"contain",cover:"cover",stretch:"stretch",center:"center"},u.cacheControl={immutable:"immutable",web:"web",cacheOnly:"cacheOnly"},u.priority={low:"low",normal:"normal",high:"high"},u.preload=e=>t.FastImageView.preload(e),u.clearMemoryCache=()=>t.FastImageView.clearMemoryCache(),u.clearDiskCache=()=>t.FastImageView.clearDiskCache();const g=n.create({imageContainer:{overflow:"hidden"}});export{u as default};
